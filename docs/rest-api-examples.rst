REST API Example Usage
======================

This document summarizes some examples of the cloudigrade REST API.

..
    This document can be regenerated by a developer using the following
    make target from the root directory of a sandbox environment having
    database ports forwarded locally:

    make docs-api-examples

Examples here use the ``http`` command from
`httpie <https://httpie.org/>`_. If you want to follow along with these
exact commands, you may need to ``brew install httpie`` or
``pip install httpie`` first.

These examples also assume you are running cloudigrade on
``localhost:8080`` and that you have correctly configured
cloudigradeâ€™s environment with appropriate variables to allow it to talk
to the various clouds (e.g. ``AWS_ACCESS_KEY_ID``).

Authorization
-------------

The v2 API is authenticated with a custom HTTP header. In order to authenticate,
a `HTTP_X_RH_IDENTITY` header must be included in the request.
This header must be the base64 encoded version of:


.. code:: json

    {
        "identity": {
            "account_number": "1337",
            "user": {
                "is_org_admin": true
            }
        }
    }

.. code:: bash

    HTTP_X_RH_IDENTITY=eyJpZGVudGl0eSI6IHsiYWNjb3VudF9udW1iZXIiOiAiMTMzNyIsICJ1c2VyIjogeyJpc19vcmdfYWRtaW4iOiB0cnVlfX19

Overview
--------

The following resource paths are currently available:

-  ``/api/v2/accounts/`` returns accounts data
-  ``/api/v2/instances/`` returns instances data
-  ``/api/v2/images/`` returns images data
-  ``/api/v2/sysconfig/`` returns sysconfig data
-  ``/api/v2/azure-offer-template/`` returns azure offer template data
-  ``/api/v2/concurrent/`` returns concurrency data


User Setup
------------------

When accessing any endpoint with the HTTP_X_RH_IDENTITY header,
if the user found in the header does not exist, it will not be created.


Customer Account Info
---------------------

List all accounts
~~~~~~~~~~~~~~~~~

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/accounts/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 1138
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: 87800892-17ad-4bce-84c2-99fd13bf6de7
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "data": [
            {
                "account_id": 1,
                "cloud_type": "aws",
                "content_object": {
                    "account_arn": "arn:aws:iam::923899456057:role/role-for-cloudigrade",
                    "aws_account_id": "923899456057",
                    "aws_cloud_account_id": 1,
                    "created_at": "2020-05-04T00:00:00Z",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-04T00:00:00Z",
                "is_enabled": true,
                "platform_application_id": 6890,
                "platform_application_is_paused": false,
                "platform_authentication_id": 6311,
                "platform_source_id": 663,
                "updated_at": "2020-05-18T13:51:59.722367Z",
                "user_id": 1
            },
            {
                "account_id": 2,
                "cloud_type": "azure",
                "content_object": {
                    "azure_cloud_account_id": 1,
                    "created_at": "2020-05-04T00:00:00Z",
                    "subscription_id": "4df77a5b-95e4-4837-8123-4823c1189ecc",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-04T00:00:00Z",
                "is_enabled": true,
                "platform_application_id": 8376,
                "platform_application_is_paused": false,
                "platform_authentication_id": 4242,
                "platform_source_id": 7961,
                "updated_at": "2020-05-18T13:51:59.722367Z",
                "user_id": 1
            }
        ],
        "links": {
            "first": "/api/cloudigrade/v2/accounts/?limit=10&offset=0",
            "last": "/api/cloudigrade/v2/accounts/?limit=10&offset=0",
            "next": null,
            "previous": null
        },
        "meta": {
            "count": 2
        }
    }


Retrieve a specific account
~~~~~~~~~~~~~~~~~~~~~~~~~~~

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/accounts/1/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 496
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: c1344a89-e699-4ad3-b87b-d8caf8639b96
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "account_id": 1,
        "cloud_type": "aws",
        "content_object": {
            "account_arn": "arn:aws:iam::923899456057:role/role-for-cloudigrade",
            "aws_account_id": "923899456057",
            "aws_cloud_account_id": 1,
            "created_at": "2020-05-04T00:00:00Z",
            "updated_at": "2020-05-18T13:51:59.722367Z"
        },
        "created_at": "2020-05-04T00:00:00Z",
        "is_enabled": true,
        "platform_application_id": 6890,
        "platform_application_is_paused": false,
        "platform_authentication_id": 6311,
        "platform_source_id": 663,
        "updated_at": "2020-05-18T13:51:59.722367Z",
        "user_id": 1
    }


Instance Info
-------------

List all instances
~~~~~~~~~~~~~~~~~~

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/instances/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 2610
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: 3bd9ddcc-05a8-4200-bd2e-4d8191415510
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "data": [
            {
                "cloud_account_id": 1,
                "cloud_type": "aws",
                "content_object": {
                    "aws_instance_id": 1,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_instance_id": "i-4932af3bda6fe8102",
                    "region": "eu-west-1",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 1,
                "machine_image_id": 1,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 1,
                "cloud_type": "aws",
                "content_object": {
                    "aws_instance_id": 2,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_instance_id": "i-774e22af3993a69e2",
                    "region": "us-east-2",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 2,
                "machine_image_id": 2,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 1,
                "cloud_type": "aws",
                "content_object": {
                    "aws_instance_id": 3,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_instance_id": "i-8f224412c876d8efb",
                    "region": "us-east-2",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 3,
                "machine_image_id": 3,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 2,
                "cloud_type": "azure",
                "content_object": {
                    "azure_instance_id": 1,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "region": "South Central US",
                    "resource_id": "/subscriptions/1db4385f-cb2b-456d-900f-19c825dab238/resourceGroups/interview/providers/Microsoft.Compute/virtualMachines/why",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 4,
                "machine_image_id": 4,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 2,
                "cloud_type": "azure",
                "content_object": {
                    "azure_instance_id": 2,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "region": "EAST US 2 EUAP",
                    "resource_id": "/subscriptions/1e64175e-d5fb-4d09-9b05-31f6f82fb71f/resourceGroups/floor/providers/Microsoft.Compute/virtualMachines/me",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 5,
                "machine_image_id": 5,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 2,
                "cloud_type": "azure",
                "content_object": {
                    "azure_instance_id": 3,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "region": "East US",
                    "resource_id": "/subscriptions/a54d596f-2e0f-4077-8a98-19b3fc643342/resourceGroups/wait/providers/Microsoft.Compute/virtualMachines/whatever",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 6,
                "machine_image_id": 6,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            }
        ],
        "links": {
            "first": "/api/cloudigrade/v2/instances/?limit=10&offset=0",
            "last": "/api/cloudigrade/v2/instances/?limit=10&offset=0",
            "next": null,
            "previous": null
        },
        "meta": {
            "count": 6
        }
    }


Retrieve a specific instance
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/instances/1/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 350
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: 7edc43f1-d34d-4568-a2cf-620f29a4ef20
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "cloud_account_id": 1,
        "cloud_type": "aws",
        "content_object": {
            "aws_instance_id": 1,
            "created_at": "2020-05-18T13:51:59.722367Z",
            "ec2_instance_id": "i-4932af3bda6fe8102",
            "region": "eu-west-1",
            "updated_at": "2020-05-18T13:51:59.722367Z"
        },
        "created_at": "2020-05-18T13:51:59.722367Z",
        "instance_id": 1,
        "machine_image_id": 1,
        "updated_at": "2020-05-18T13:51:59.722367Z"
    }


Filtering instances
~~~~~~~~~~~~~~~~~~~

You may also include an optional "running_since" query string argument to filter for only
instances that have been running uninterrupted since the given time.

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/instances/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        running_since=="2020-05-18 13:51:59.722367+00:00"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 2369
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: 3d49bad4-550e-4109-bb6a-247de3dd9ab7
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "data": [
            {
                "cloud_account_id": 1,
                "cloud_type": "aws",
                "content_object": {
                    "aws_instance_id": 1,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_instance_id": "i-4932af3bda6fe8102",
                    "region": "eu-west-1",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 1,
                "machine_image_id": 1,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 1,
                "cloud_type": "aws",
                "content_object": {
                    "aws_instance_id": 2,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_instance_id": "i-774e22af3993a69e2",
                    "region": "us-east-2",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 2,
                "machine_image_id": 2,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 2,
                "cloud_type": "azure",
                "content_object": {
                    "azure_instance_id": 1,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "region": "South Central US",
                    "resource_id": "/subscriptions/1db4385f-cb2b-456d-900f-19c825dab238/resourceGroups/interview/providers/Microsoft.Compute/virtualMachines/why",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 4,
                "machine_image_id": 4,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 2,
                "cloud_type": "azure",
                "content_object": {
                    "azure_instance_id": 2,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "region": "EAST US 2 EUAP",
                    "resource_id": "/subscriptions/1e64175e-d5fb-4d09-9b05-31f6f82fb71f/resourceGroups/floor/providers/Microsoft.Compute/virtualMachines/me",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 5,
                "machine_image_id": 5,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "cloud_account_id": 2,
                "cloud_type": "azure",
                "content_object": {
                    "azure_instance_id": 3,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "region": "East US",
                    "resource_id": "/subscriptions/a54d596f-2e0f-4077-8a98-19b3fc643342/resourceGroups/wait/providers/Microsoft.Compute/virtualMachines/whatever",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "instance_id": 6,
                "machine_image_id": 6,
                "updated_at": "2020-05-18T13:51:59.722367Z"
            }
        ],
        "links": {
            "first": "/api/cloudigrade/v2/instances/?limit=10&offset=0&running_since=2020-05-18+13%3A51%3A59.722367%2B00%3A00",
            "last": "/api/cloudigrade/v2/instances/?limit=10&offset=0&running_since=2020-05-18+13%3A51%3A59.722367%2B00%3A00",
            "next": null,
            "previous": null
        },
        "meta": {
            "count": 5
        }
    }


Machine Images
--------------

List all images
~~~~~~~~~~~~~~~

Below command will return all images that have been seen used by any instance for any account belonging to the user that makes the request.

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/images/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 6922
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: 14acb226-cffc-4a69-899c-7762750c1978
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "data": [
            {
                "architecture": "x86_64",
                "cloud_type": "aws",
                "content_object": {
                    "aws_image_id": 1,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_ami_id": "ami-c0fa7a26",
                    "id": 1,
                    "is_cloud_access": false,
                    "is_marketplace": false,
                    "owner_aws_account_id": "923899456057",
                    "platform": "none",
                    "platform_details": null,
                    "product_codes": null,
                    "region": null,
                    "updated_at": "2020-05-18T13:51:59.722367Z",
                    "usage_operation": null
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "image_id": 1,
                "inspection_json": "{\"rhel_enabled_repos_found\": true, \"rhel_version\": \"7.7\", \"syspurpose\": {\"role\": \"Red Hat Enterprise Linux Server\", \"service_level_agreement\": \"Premium\", \"usage\": \"Development/Test\"}}",
                "is_encrypted": false,
                "name": null,
                "openshift": false,
                "openshift_detected": false,
                "rhel": true,
                "rhel_detected": true,
                "rhel_detected_by_tag": false,
                "rhel_enabled_repos_found": true,
                "rhel_product_certs_found": false,
                "rhel_release_files_found": false,
                "rhel_signed_packages_found": false,
                "rhel_version": "7.7",
                "status": "inspected",
                "syspurpose": {
                    "role": "Red Hat Enterprise Linux Server",
                    "service_level_agreement": "Premium",
                    "usage": "Development/Test"
                },
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "architecture": "x86_64",
                "cloud_type": "aws",
                "content_object": {
                    "aws_image_id": 2,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_ami_id": "ami-ca795651",
                    "id": 2,
                    "is_cloud_access": false,
                    "is_marketplace": false,
                    "owner_aws_account_id": "923899456057",
                    "platform": "none",
                    "platform_details": null,
                    "product_codes": null,
                    "region": null,
                    "updated_at": "2020-05-18T13:51:59.722367Z",
                    "usage_operation": null
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "image_id": 2,
                "inspection_json": "{\"rhel_enabled_repos_found\": true, \"rhel_version\": \"7.7\", \"syspurpose\": {\"role\": \"Red Hat Enterprise Linux Server\", \"service_level_agreement\": \"Premium\", \"usage\": \"Development/Test\"}}",
                "is_encrypted": false,
                "name": null,
                "openshift": false,
                "openshift_detected": false,
                "rhel": true,
                "rhel_detected": true,
                "rhel_detected_by_tag": false,
                "rhel_enabled_repos_found": true,
                "rhel_product_certs_found": false,
                "rhel_release_files_found": false,
                "rhel_signed_packages_found": false,
                "rhel_version": "7.7",
                "status": "inspected",
                "syspurpose": {
                    "role": "Red Hat Enterprise Linux Server",
                    "service_level_agreement": "Premium",
                    "usage": "Development/Test"
                },
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "architecture": "x86_64",
                "cloud_type": "aws",
                "content_object": {
                    "aws_image_id": 3,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "ec2_ami_id": "ami-2a3fa670",
                    "id": 3,
                    "is_cloud_access": false,
                    "is_marketplace": false,
                    "owner_aws_account_id": "923899456057",
                    "platform": "none",
                    "platform_details": null,
                    "product_codes": null,
                    "region": null,
                    "updated_at": "2020-05-18T13:51:59.722367Z",
                    "usage_operation": null
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "image_id": 3,
                "inspection_json": "{\"rhel_enabled_repos_found\": true, \"rhel_version\": \"7.7\", \"syspurpose\": {\"role\": \"Red Hat Enterprise Linux Server\", \"service_level_agreement\": \"Premium\", \"usage\": \"Development/Test\"}}",
                "is_encrypted": false,
                "name": null,
                "openshift": false,
                "openshift_detected": false,
                "rhel": true,
                "rhel_detected": true,
                "rhel_detected_by_tag": false,
                "rhel_enabled_repos_found": true,
                "rhel_product_certs_found": false,
                "rhel_release_files_found": false,
                "rhel_signed_packages_found": false,
                "rhel_version": "7.7",
                "status": "inspected",
                "syspurpose": {
                    "role": "Red Hat Enterprise Linux Server",
                    "service_level_agreement": "Premium",
                    "usage": "Development/Test"
                },
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "architecture": "x86_64",
                "cloud_type": "azure",
                "content_object": {
                    "azure_image_id": 1,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "id": 1,
                    "is_marketplace": false,
                    "region": null,
                    "resource_id": "/subscriptions/0bd192a2-e8ef-489a-ae12-061fa2309bd4/resourceGroups/step/providers/Microsoft.Compute/images/themselves",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "image_id": 4,
                "inspection_json": "{\"rhel_enabled_repos_found\": true, \"rhel_version\": \"7.7\", \"syspurpose\": {\"role\": \"Red Hat Enterprise Linux Server\", \"service_level_agreement\": \"Premium\", \"usage\": \"Development/Test\"}}",
                "is_encrypted": false,
                "name": null,
                "openshift": false,
                "openshift_detected": false,
                "rhel": true,
                "rhel_detected": true,
                "rhel_detected_by_tag": false,
                "rhel_enabled_repos_found": true,
                "rhel_product_certs_found": false,
                "rhel_release_files_found": false,
                "rhel_signed_packages_found": false,
                "rhel_version": "7.7",
                "status": "inspected",
                "syspurpose": {
                    "role": "Red Hat Enterprise Linux Server",
                    "service_level_agreement": "Premium",
                    "usage": "Development/Test"
                },
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "architecture": "x86_64",
                "cloud_type": "azure",
                "content_object": {
                    "azure_image_id": 2,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "id": 2,
                    "is_marketplace": false,
                    "region": null,
                    "resource_id": "/subscriptions/7a35bacc-0fef-4d05-8b6c-9e19d5421138/resourceGroups/help/providers/Microsoft.Compute/images/past",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "image_id": 5,
                "inspection_json": "{\"rhel_enabled_repos_found\": true, \"rhel_version\": \"7.7\", \"syspurpose\": {\"role\": \"Red Hat Enterprise Linux Server\", \"service_level_agreement\": \"Premium\", \"usage\": \"Development/Test\"}}",
                "is_encrypted": false,
                "name": null,
                "openshift": false,
                "openshift_detected": false,
                "rhel": true,
                "rhel_detected": true,
                "rhel_detected_by_tag": false,
                "rhel_enabled_repos_found": true,
                "rhel_product_certs_found": false,
                "rhel_release_files_found": false,
                "rhel_signed_packages_found": false,
                "rhel_version": "7.7",
                "status": "inspected",
                "syspurpose": {
                    "role": "Red Hat Enterprise Linux Server",
                    "service_level_agreement": "Premium",
                    "usage": "Development/Test"
                },
                "updated_at": "2020-05-18T13:51:59.722367Z"
            },
            {
                "architecture": "x86_64",
                "cloud_type": "azure",
                "content_object": {
                    "azure_image_id": 3,
                    "created_at": "2020-05-18T13:51:59.722367Z",
                    "id": 3,
                    "is_marketplace": false,
                    "region": null,
                    "resource_id": "/subscriptions/5be7bb78-d6e6-4b91-abb2-ac34f7c40ec9/resourceGroups/discover/providers/Microsoft.Compute/images/mother",
                    "updated_at": "2020-05-18T13:51:59.722367Z"
                },
                "created_at": "2020-05-18T13:51:59.722367Z",
                "image_id": 6,
                "inspection_json": "{\"rhel_enabled_repos_found\": true, \"rhel_version\": \"7.7\", \"syspurpose\": {\"role\": \"Red Hat Enterprise Linux Server\", \"service_level_agreement\": \"Premium\", \"usage\": \"Development/Test\"}}",
                "is_encrypted": false,
                "name": null,
                "openshift": false,
                "openshift_detected": false,
                "rhel": true,
                "rhel_detected": true,
                "rhel_detected_by_tag": false,
                "rhel_enabled_repos_found": true,
                "rhel_product_certs_found": false,
                "rhel_release_files_found": false,
                "rhel_signed_packages_found": false,
                "rhel_version": "7.7",
                "status": "inspected",
                "syspurpose": {
                    "role": "Red Hat Enterprise Linux Server",
                    "service_level_agreement": "Premium",
                    "usage": "Development/Test"
                },
                "updated_at": "2020-05-18T13:51:59.722367Z"
            }
        ],
        "links": {
            "first": "/api/cloudigrade/v2/images/?limit=10&offset=0",
            "last": "/api/cloudigrade/v2/images/?limit=10&offset=0",
            "next": null,
            "previous": null
        },
        "meta": {
            "count": 6
        }
    }


Retrieve a specific image
~~~~~~~~~~~~~~~~~~~~~~~~~

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/images/1/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 1143
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: c7260508-999e-41a1-921a-b38ca6583162
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "architecture": "x86_64",
        "cloud_type": "aws",
        "content_object": {
            "aws_image_id": 1,
            "created_at": "2020-05-18T13:51:59.722367Z",
            "ec2_ami_id": "ami-c0fa7a26",
            "id": 1,
            "is_cloud_access": false,
            "is_marketplace": false,
            "owner_aws_account_id": "923899456057",
            "platform": "none",
            "platform_details": null,
            "product_codes": null,
            "region": null,
            "updated_at": "2020-05-18T13:51:59.722367Z",
            "usage_operation": null
        },
        "created_at": "2020-05-18T13:51:59.722367Z",
        "image_id": 1,
        "inspection_json": "{\"rhel_enabled_repos_found\": true, \"rhel_version\": \"7.7\", \"syspurpose\": {\"role\": \"Red Hat Enterprise Linux Server\", \"service_level_agreement\": \"Premium\", \"usage\": \"Development/Test\"}}",
        "is_encrypted": false,
        "name": null,
        "openshift": false,
        "openshift_detected": false,
        "rhel": true,
        "rhel_detected": true,
        "rhel_detected_by_tag": false,
        "rhel_enabled_repos_found": true,
        "rhel_product_certs_found": false,
        "rhel_release_files_found": false,
        "rhel_signed_packages_found": false,
        "rhel_version": "7.7",
        "status": "inspected",
        "syspurpose": {
            "role": "Red Hat Enterprise Linux Server",
            "service_level_agreement": "Premium",
            "usage": "Development/Test"
        },
        "updated_at": "2020-05-18T13:51:59.722367Z"
    }


Report Commands
---------------

These APIs may be used to generate calculated and aggregated report data.

Daily Max Concurrency
~~~~~~~~~~~~~~~~~~~~~

The concurrency API returns a paginated list of days, and each day includes the
maximum concurrent number of instances, grouped by various combinations of role,
sla, and architecture seen concurrently in use during that day.

Optional ``start_date`` is an ISO-8601 date that is the inclusive start of the
reporting period. If not defined, default is "yesterday".

Optional ``end_date`` is an ISO-8601 date that is the exclusive end of the
reporting period. If not defined, default is "today".

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/concurrent/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        start_date=="2020-05-11"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 17102
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: c5a9b50b-2a72-4042-b328-7287e27ce88f
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "data": [
            {
                "date": "2020-05-11",
                "maximum_counts": [
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    }
                ]
            },
            {
                "date": "2020-05-12",
                "maximum_counts": [
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    }
                ]
            },
            {
                "date": "2020-05-13",
                "maximum_counts": [
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    }
                ]
            },
            {
                "date": "2020-05-14",
                "maximum_counts": [
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    }
                ]
            },
            {
                "date": "2020-05-15",
                "maximum_counts": [
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    }
                ]
            },
            {
                "date": "2020-05-16",
                "maximum_counts": []
            },
            {
                "date": "2020-05-17",
                "maximum_counts": [
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "x86_64",
                        "instances_count": 5,
                        "role": "_ANY",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "_ANY",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "_ANY"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "_ANY",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    },
                    {
                        "arch": "_ANY",
                        "instances_count": 5,
                        "role": "Red Hat Enterprise Linux Server",
                        "service_type": "",
                        "sla": "Premium",
                        "usage": "Development/Test"
                    }
                ]
            }
        ],
        "links": {
            "first": "/api/cloudigrade/v2/concurrent/?limit=10&offset=0&start_date=2020-05-11",
            "last": "/api/cloudigrade/v2/concurrent/?limit=10&offset=0&start_date=2020-05-11",
            "next": null,
            "previous": null
        },
        "meta": {
            "count": 7
        }
    }

If your requested ``start_date`` and ``end_date`` values would result in some
dates that not completed their calculations, the server will return ``425 Too Early``.

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/concurrent/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        start_date=="2020-04-17"

Response:

::

    HTTP/1.1 425 Too Early
    Allow: GET, HEAD, OPTIONS
    Content-Length: 64
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: 51d15209-8625-4f41-9ac8-27d761954bb7
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "detail": "Results are currently unavailable, try again later."
    }

If your requested ``start_date`` and ``end_date`` values would result in some
future dates beyond "yesterday", the API will return a 400 with the relevant errors.
Daily max concurrency results will end "yesterday" at the latest.

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/concurrent/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        start_date=="2020-05-17" \
        end_date=="2020-05-25"

Response:

::

    HTTP/1.1 400 Bad Request
    Allow: GET, HEAD, OPTIONS
    Content-Length: 50
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: ff7fa2ab-df33-4a9c-ae38-0257b4f6bfe6
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "end_date": [
            "end_date cannot be in the future."
        ]
    }

If your requested ``start_date`` and ``end_date`` values would result in exclusively
future dates beyond "yesterday", the API will also return a 400 with the relevant errors.
 In the following example, the request is for dates "tomorrow" through "one week from today".

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/concurrent/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        start_date=="2020-05-19" \
        end_date=="2020-05-25"

Response:

::

    HTTP/1.1 400 Bad Request
    Allow: GET, HEAD, OPTIONS
    Content-Length: 112
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: b4ce7810-cc15-44de-aa0a-1039210a4c03
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "end_date": [
            "end_date cannot be in the future."
        ],
        "start_date": [
            "start_date cannot be today or in the future."
        ]
    }

If your requested ``end_date`` value is not greater then that of the user
``date_joined``, the api will return a 400 with the relevant error.

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/concurrent/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        start_date=="2018-12-18 00:00:00+00:00" \
        end_date=="2018-12-25 00:00:00+00:00"

Response:

::

    HTTP/1.1 400 Bad Request
    Allow: GET, HEAD, OPTIONS
    Content-Length: 151
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: c2d87254-dc29-4c26-9ea7-75f75f8161e6
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "end_date": [
            "end_date must be same as or after the user creation date."
        ],
        "start_date": [
            "start_date must be same as or after the user creation date."
        ]
    }

Miscellaneous Commands
----------------------

Retrieve current publicly-viewable system configuration
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The sysconfig endpoint includes the AWS cloud account id used by the application, AWS policies used for acting on behalf of customers, and the currently deployed backend version.

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/sysconfig/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}"

Response:

::

    HTTP/1.1 200 OK
    Allow: GET, HEAD, OPTIONS
    Content-Length: 680
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: c8c6c77d-1ce1-4f9c-b377-9da1ef56a61f
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "aws_account_id": 988212965548,
        "aws_policies": {
            "traditional_inspection": {
                "Statement": [
                    {
                        "Action": [
                            "ec2:DescribeImages",
                            "ec2:DescribeInstances",
                            "ec2:ModifySnapshotAttribute",
                            "ec2:DescribeSnapshotAttribute",
                            "ec2:DescribeSnapshots",
                            "ec2:CopyImage",
                            "ec2:CreateTags",
                            "ec2:DescribeRegions",
                            "cloudtrail:CreateTrail",
                            "cloudtrail:UpdateTrail",
                            "cloudtrail:PutEventSelectors",
                            "cloudtrail:DescribeTrails",
                            "cloudtrail:StartLogging",
                            "cloudtrail:DeleteTrail"
                        ],
                        "Effect": "Allow",
                        "Resource": "*",
                        "Sid": "CloudigradePolicy"
                    }
                ],
                "Version": "2012-10-17"
            }
        },
        "azure_offer_template_path": "/api/cloudigrade/v2/azure-offer-template/",
        "version": "489-cloudigrade-version - d2b30c637ce3788e22990b21434bac2edcfb7ede"
    }

Retrieve anonymously viewable Azure Offer Template
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

The Azure Offer Template endpoint returns a json template populated with current running data, to be consumed by Azure to grant cloudigrade access to the customers account.

Request:

.. code:: bash

    http localhost:8080/api/cloudigrade/v2/azure-offer-template/

Response:

::

    HTTP/1.1 200 OK
    Access-Control-Allow-Origin: *
    Allow: GET, HEAD, OPTIONS
    Content-Length: 2017
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: f407ca72-6eaf-4a07-bfeb-ddf653b84014
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "$schema": "https://schema.management.azure.com/schemas/2019-08-01/subscriptionDeploymentTemplate.json#",
        "contentVersion": "1.0.0.0",
        "outputs": {
            "authorizations": {
                "type": "array",
                "value": "[parameters('authorizations')]"
            },
            "mspOfferName": {
                "type": "string",
                "value": "[concat('Managed by', ' ', parameters('mspOfferName'))]"
            }
        },
        "parameters": {
            "authorizations": {
                "allowedValues": [
                    [
                        {
                            "principalId": "691f0b3e-exam-ple3-b03f-6eb5120acabb",
                            "principalIdDisplayName": "cloudigrade-rest-api-examples",
                            "roleDefinitionId": "acdd72a7-3385-48ef-bd42-f606fba81ae7"
                        }
                    ]
                ],
                "defaultValue": [
                    {
                        "principalId": "691f0b3e-exam-ple3-b03f-6eb5120acabb",
                        "principalIdDisplayName": "cloudigrade-rest-api-examples",
                        "roleDefinitionId": "acdd72a7-3385-48ef-bd42-f606fba81ae7"
                    }
                ],
                "type": "array"
            },
            "managedByTenantId": {
                "allowedValues": [
                    "81329282-exam-ple3-80af-f6457b5b32ad"
                ],
                "defaultValue": "81329282-exam-ple3-80af-f6457b5b32ad",
                "type": "string"
            },
            "mspOfferDescription": {
                "allowedValues": [
                    ""
                ],
                "defaultValue": "",
                "type": "string"
            },
            "mspOfferName": {
                "allowedValues": [
                    "cloudigrade-rest-api-examples"
                ],
                "defaultValue": "cloudigrade-rest-api-examples",
                "type": "string"
            }
        },
        "resources": [
            {
                "apiVersion": "2020-02-01-preview",
                "name": "[variables('mspRegistrationName')]",
                "properties": {
                    "authorizations": "[parameters('authorizations')]",
                    "description": "[parameters('mspOfferDescription')]",
                    "managedByTenantId": "[parameters('managedByTenantId')]",
                    "registrationDefinitionName": "[parameters('mspOfferName')]"
                },
                "type": "Microsoft.ManagedServices/registrationDefinitions"
            },
            {
                "apiVersion": "2020-02-01-preview",
                "dependsOn": [
                    "[resourceId('Microsoft.ManagedServices/registrationDefinitions/', variables('mspRegistrationName'))]"
                ],
                "name": "[variables('mspAssignmentName')]",
                "properties": {
                    "registrationDefinitionId": "[resourceId('Microsoft.ManagedServices/registrationDefinitions/', variables('mspRegistrationName'))]"
                },
                "type": "Microsoft.ManagedServices/registrationAssignments"
            }
        ],
        "variables": {
            "mspAssignmentName": "[guid(parameters('mspOfferName'))]",
            "mspRegistrationName": "[guid(parameters('mspOfferName'))]"
        }
    }


Internal APIs
-------------

The following APIs are only available internally and are not fully supported.
Caveat emptor. Hic sunt dracones.


Create an AWS account
~~~~~~~~~~~~~~~~~~~~~

This request may take a few seconds because of multiple round-trip calls
to the AWS APIs for each region. The "name" attribute is required and has a
maximum supported length of 256 characters. The "platform_authentication_id",
"platform_application_id", "platform_endpoint_id", and "platform_source_id"
attributes are all required and should be integers.

Request:

.. code:: bash

    http post localhost:8080/internal/api/cloudigrade/v1/accounts/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        cloud_type="aws" \
        account_arn="arn:aws:iam::761488217673:role/role-for-cloudigrade" \
        platform_authentication_id="2281" \
        platform_application_id="4617" \
        platform_source_id="2289"

Response:

::

    HTTP/1.1 201 Created
    Allow: GET, POST, HEAD, OPTIONS
    Content-Length: 511
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: 4bc9d920-f5e9-43cc-8bea-bedff5aefbcf
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "account_id": 3,
        "cloud_type": "aws",
        "content_object": {
            "account_arn": "arn:aws:iam::761488217673:role/role-for-cloudigrade",
            "aws_account_id": "761488217673",
            "aws_cloud_account_id": 2,
            "created_at": "2020-05-18T13:51:59.722367Z",
            "updated_at": "2020-05-18T13:51:59.722367Z"
        },
        "created_at": "2020-05-18T13:51:59.722367Z",
        "is_enabled": true,
        "platform_application_id": 4617,
        "platform_application_is_paused": false,
        "platform_authentication_id": 2281,
        "platform_source_id": 2289,
        "updated_at": "2020-05-18T13:51:59.722367Z",
        "user_id": 1
    }

If you attempt to create an AWS account for an ARN that is already in
the system, you should get a 400 error.

Request:

.. code:: bash

    http post localhost:8080/internal/api/cloudigrade/v1/accounts/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        cloud_type="aws" \
        account_arn="arn:aws:iam::761488217673:role/role-for-cloudigrade" \
        platform_authentication_id="1553" \
        platform_application_id="4104" \
        platform_source_id="8725"

Response:

::

    HTTP/1.1 400 Bad Request
    Allow: GET, POST, HEAD, OPTIONS
    Content-Length: 157
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: dcc9fe30-09c8-4471-9fc1-30745bcaa113
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "account_arn": "Could not enable cloud metering. Error code CG1001. AWS ARN must be unique, but another cloud account with the same AWS ARN already exists."
    }


Create an Azure account
~~~~~~~~~~~~~~~~~~~~~
The "name" attribute is required and has a maximum supported length of 256 characters.
The "platform_authentication_id", "platform_application_id", "platform_endpoint_id",
and "platform_source_id" attributes are all required and should be integers.

Request:

.. code:: bash

    http post localhost:8080/internal/api/cloudigrade/v1/accounts/ "X-RH-IDENTITY:${HTTP_X_RH_IDENTITY}" \
        cloud_type="azure" \
        subscription_id="f40be6ef-0a7c-41e6-86f1-85aa9192e037" \
        platform_authentication_id="9861" \
        platform_application_id="2407" \
        platform_source_id="5081"

Response:

::

    HTTP/1.1 201 Created
    Allow: GET, POST, HEAD, OPTIONS
    Content-Length: 472
    Content-Type: application/json
    Referrer-Policy: same-origin
    X-CLOUDIGRADE-REQUEST-ID: 256de490-6cec-45ef-9a6a-10196ac627bb
    X-Content-Type-Options: nosniff
    X-Frame-Options: DENY

    {
        "account_id": 4,
        "cloud_type": "azure",
        "content_object": {
            "azure_cloud_account_id": 2,
            "created_at": "2020-05-18T13:51:59.722367Z",
            "subscription_id": "f40be6ef-0a7c-41e6-86f1-85aa9192e037",
            "updated_at": "2020-05-18T13:51:59.722367Z"
        },
        "created_at": "2020-05-18T13:51:59.722367Z",
        "is_enabled": true,
        "platform_application_id": 2407,
        "platform_application_is_paused": false,
        "platform_authentication_id": 9861,
        "platform_source_id": 5081,
        "updated_at": "2020-05-18T13:51:59.722367Z",
        "user_id": 1
    }
